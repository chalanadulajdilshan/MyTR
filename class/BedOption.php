<?php/* * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. *//** * Description of bed_option * * @author Chalana */class BedOption {    public $id;    public $room;    public $bed_name;    public $num_bed;    public $guest_stay;    public $extra_bed;    public function __construct($id) {        if ($id) {            $query = "SELECT * FROM `bed_option` WHERE `id`=" . $id;            $db = new Database();            $result = mysqli_fetch_array($db->readQuery($query));            $this->id = $result['id'];            $this->room = $result['room'];            $this->bed_name = $result['bed_name'];            $this->num_bed = $result['num_bed'];            $this->guest_stay = $result['guest_stay'];            $this->extra_bed = $result['extra_bed'];            return $this;        }    }    public function create() {        $query = "INSERT INTO `bed_option` (`room`,`bed_name`,`num_bed`,`guest_stay`,`extra_bed`) VALUES  ('"                . $this->room . "','"                . $this->bed_name . "', '"                . $this->num_bed . "', '"                . $this->guest_stay . "', '"                . $this->extra_bed . "')";             $db = new Database();        $result = $db->readQuery($query);        if ($result) {            $last_id = mysqli_insert_id();            return $this->__construct($last_id);        } else {            return FALSE;        }    }    public function all() {        $query = "SELECT * FROM `bed_option` ORDER BY extra_bed ASC";        $db = new Database();        $result = $db->readQuery($query);        $array_res = array();        while ($row = mysqli_fetch_array($result)) {            array_push($array_res, $row);        }        return $array_res;    }    public function update() {        $query = "UPDATE  `bed_option` SET "                  . "`num_bed` ='" . $this->num_bed . "', "                . "`guest_stay` ='" . $this->guest_stay . "', "                . "`extra_bed` ='" . $this->extra_bed . "' "                . "WHERE `id` = '" . $this->id . "'";                $db = new Database();        $result = $db->readQuery($query);        if ($result) {            return $this->__construct($this->id);        } else {            return FALSE;        }    }    public function delete() {        $this->deletePhotos();        unlink(Helper::getSitePath() . "upload/activity/" . $this->bed_name);        $query = 'DELETE FROM `bed_option` WHERE id="' . $this->id . '"';        $db = new Database();        return $db->readQuery($query);    }    public function deletePhotos() {        $ACTIVITY_PHOTO = new ActivitiesPhoto(NULL);        $allPhotos = $ACTIVITY_PHOTO->getActivitiesPhotosById($this->id);        foreach ($allPhotos as $photo) {            $IMG = $ACTIVITY_PHOTO->bed_name = $photo["bed_name"];            unlink(Helper::getSitePath() . "upload/activity/gallery/" . $IMG);            unlink(Helper::getSitePath() . "upload/activity/gallery/thumb/" . $IMG);            $ACTIVITY_PHOTO->id = $photo["id"];            $ACTIVITY_PHOTO->delete();        }    }    public function arrange($key, $img) {        $query = "UPDATE `bed_option` SET `extra_bed` = '" . $key . "'  WHERE id = '" . $img . "'";        $db = new Database();        $result = $db->readQuery($query);        return $result;    }    public function getActivitiesByTitle($room) {        $query = "SELECT `id` FROM `bed_option` WHERE `room` LIKE '" . $room . "'";        $db = new Database();        $result = mysqli_fetch_array($db->readQuery($query));        return $result['id'];    }}