<?php/* * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. *//** * Description of accommodation * * @author chalana */class Accommodation {    public $id;    public $customer_id;    public $type;    public $title;    public $booking_com;    public $tripadvisor;    public $agoda;    public $expedia;    public $star_rating;    public $address_1;    public $address_2;    public $city;    public $zip_code;    public $contact_name;    public $mobile_number_1;    public $mobile_number_2;    public $email;    public $image_name;    public $parking;    public $breakfast;    public $children;    public $pets;    public $check_in;    public $check_out;    public $description;    public $guest_payment;    public $payment_card;    public $invoice_name;    public $map;    public $map_image;    public $location;    public $isPublished;    public $queue;    public function __construct($id) {        if ($id) {            $query = "SELECT  * FROM `accommodation` WHERE `id`=" . $id;            $db = new Database();            $result = mysqli_fetch_array($db->readQuery($query));            $this->id = $result['id'];            $this->customer_id = $result['customer_id'];            $this->type = $result['type'];            $this->title = $result['title'];            $this->booking_com = $result['booking_com'];            $this->tripadvisor = $result['tripadvisor'];            $this->agoda = $result['agoda'];            $this->expedia = $result['expedia'];            $this->star_rating = $result['star_rating'];            $this->address_1 = $result['address_1'];            $this->address_2 = $result['address_2'];            $this->city = $result['city'];            $this->zip_code = $result['zip_code'];            $this->contact_name = $result['contact_name'];            $this->mobile_number_1 = $result['mobile_number_1'];            $this->mobile_number_2 = $result['mobile_number_2'];            $this->email = $result['email'];            $this->image_name = $result['image_name'];            $this->parking = $result['parking'];            $this->breakfast = $result['breakfast'];            $this->children = $result['children'];            $this->pets = $result['pets'];            $this->check_in = $result['check_in'];            $this->check_out = $result['check_out'];            $this->description = $result['description'];            $this->guest_payment = $result['guest_payment'];            $this->payment_card = $result['payment_card'];            $this->invoice_name = $result['invoice_name'];            $this->map = $result['map'];            $this->map_image = $result['map_image'];            $this->location = $result['location'];            $this->isPublished = $result['isPublished'];            $this->queue = $result['queue'];            return $this;        }    }    public function create() {        $query = "INSERT INTO `accommodation` (`customer_id`,`type`,`title`,`booking_com`,`tripadvisor`,`agoda`,`expedia`,`star_rating`,`address_1`,`address_2`,`email`,`city`,`zip_code`,`contact_name`,`mobile_number_1`,`mobile_number_2`,`image_name`,`parking`,`breakfast`,`children`,`pets`,`check_in`,`check_out`,`description`,`guest_payment`,`payment_card`,`invoice_name`,`queue`) VALUES  ('"                . $this->customer_id . "','"                . $this->type . "','"                . $this->title . "','"                . $this->booking_com . "','"                . $this->tripadvisor . "','"                . $this->agoda . "','"                . $this->expedia . "','"                . $this->star_rating . "','"                . $this->address_1 . "','"                . $this->address_2 . "','"                . $this->email . "','"                . $this->city . "','"                . $this->zip_code . "','"                . $this->contact_name . "','"                . $this->mobile_number_1 . "','"                . $this->mobile_number_2 . "','"                . $this->image_name . "', '"                . $this->parking . "', '"                . $this->breakfast . "', '"                . $this->children . "', '"                . $this->pets . "', '"                . $this->check_in . "', '"                . $this->check_out . "', '"                . $this->description . "', '"                . $this->guest_payment . "', '"                . $this->payment_card . "', '"                . $this->invoice_name . "', '"                . $this->queue . "')";        $db = new Database();        $result = $db->readQuery($query);        if ($result) {            $last_id = mysqli_insert_id();            return $this->__construct($last_id);        } else {            return FALSE;        }    }    public function all() {        $query = "SELECT * FROM `accommodation` ORDER BY queue ASC";        $db = new Database();        $result = $db->readQuery($query);        $array_res = array();        while ($row = mysqli_fetch_array($result)) {            array_push($array_res, $row);        }        return $array_res;    }    public function getAllByFilter($accommodation_type, $start_rate, $facility, $pageLimit, $setLimit) {        $query = "SELECT * FROM `accommodation` WHERE ";        if (!empty($accommodation_type)) {            $accommodation_type_filter = implode(",", $accommodation_type);            $query .= " `type` in( " . $accommodation_type_filter . ")  AND ";        }        if (!empty($start_rate)) {            $start_rate_filter = implode(",", $start_rate);            $query .= " `star_rating` in( " . $start_rate_filter . ")  AND ";        }        if (!empty($facility)) {            $facility_filter = implode(",", $facility);            $query .= " `facility` in( " . $facility_filter . ")  AND ";        }        $query .= " `isPublished` = 1  ORDER BY `queue` ASC LIMIT " . $pageLimit . " , " . $setLimit;        $db = new Database();        $result = $db->readQuery($query);        $out_put = '';        while ($row = mysqli_fetch_array($result)) {            $ROOM = new Room(NULL);            $CITY = new City($row['city']);            $ACCOMMODATION_FACILITY = new AccommodationFacility(NULL);            $ACCOMMODATION_TYPE = new AccommodationType($row['type']);            $min_price = $ROOM->getMinPriceByAccommodation($row['id']);            $out_put .= '<div class="product-long-item-wrapper">                 <div class="product-long-item">                    <a href="accommodations/view/' . base64_encode($row['id']) . '" target="_blank">                                            <div class="row equal-height shrink-auto-md gap-15">                                                 <div class="col-12 col-shrink">                                                     <div class="image">                                                     <div class="image caption-relative">';            $out_put .= '<img src="upload/accommodation/gallery/' . $row['image_name'] . '" alt="' . $row['title'] . '" />'                    . '<div class="caption-holder padding-10">                                                                                             <div class="caption-top w-100 text-right">                                                    <span class=" d-inline-block font600 text-uppercase font12 ph-15 pv-5 line-135 rounded" style="background-color: #006607">' . $ACCOMMODATION_TYPE->title . ' </span>                                                </div>                                            </div>                                          </div>                                          </a>';            $out_put .= '</div>                          </div>                            <div class="col-12 col-auto">                                                    <div class="col-inner d-flex flex-column">                                                        <div class="content-top-2">                                                            <div class="d-flex">                                                                <div>                                                                    <div class="rating-item rating-sm rating-inline">                                                                        <div class="rating-icons">';            if ($row['star_rating'] == 1) {                $out_put .= '   <span class="material-icons star-size-1">    star   </span> ';            }            if ($row['star_rating'] == 2) {                $out_put .= '   <span class="material-icons star-size-1">    star   </span>  <span class="material-icons star-size-1">    star   </span> ';            }            if ($row['star_rating'] == 3) {                $out_put .= '   <span class="material-icons star-size-1">    star   </span>  <span class="material-icons star-size-1">    star   </span>  <span class="material-icons star-size-1">    star   </span> ';            }            if ($row['star_rating'] == 4) {                $out_put .= '<span class="material-icons star-size-1">    star   </span>  <span class="material-icons star-size-1">    star   </span>  <span class="material-icons star-size-1">    star   </span>  <span class="material-icons star-size-1">    star   </span> ';            }            if ($row['star_rating'] == 5) {                $out_put .= '<span class="material-icons star-size-1">    star   </span> <span class="material-icons star-size-1">    star   </span>  <span class="material-icons star-size-1">    star   </span>  <span class="material-icons star-size-1">    star   </span>  <span class="material-icons star-size-1">    star   </span> ';            }            $out_put .= '</div> <p class="rating-text text-muted"><span class="bg-primary">6.0</span> <strong class="text-dark">Good</strong> <span class="font13">- 1,2547 reviews</span></p>   </div>                                 <h5><a href="accommodations/view/' . base64_encode($row['id']) . '" target="_blank">' . ucwords($row['title']) . '</a></h5>            <p class = "location"><i class = "fas fa-map-marker-alt text-primary"></i>' . $row['address_1'] . ', ' . $row['address_2'] . ' ' . $CITY->name . '</p>            </div>            <div class = "ml-auto">            <div class = "price">            start from <b class="text-danger">  </b>            <span class = "text-secondary">$' . $min_price . '</span>            per night                        </div>                    </div>                </div>            </div>            <div class = "  text-justify">          ' . substr($row['description'], 0, 160) . '...';            if ($row['booking_com'] == 1) {                $out_put .= '<br>  <img src="images/booking-com.png" width="5%" class="pt-1">';            }            if ($row['agoda'] == 1) {                $out_put .= '   <img src="images/agoda.png" width="5%" class="pt-1">';            }            if ($row['expedia'] == 1) {                $out_put .= '   <img src="images/expedia.png" width="5%" class="pt-1">';            }            if ($row['tripadvisor'] == 1) {                $out_put .= '<img src="images/trip.png" width="5%" class="pt-1">';            }            $out_put .= '</div>             <div class = "content-bottom mt-auto">            <div class = "d-flex align-items-center">             <div>            <ul class = "list-icon-absolute list-inline-block">';            if ($row['breakfast'] == 0) {                $out_put .= ' <li><span class = "icon-font"><i class = "fas fa-check-circle text-primary"></i> </span> Breakfast not Included</li>';            }            if ($row['breakfast'] == 1) {                $out_put .= ' <li><span class = "icon-font"><i class = "fas fa-check-circle text-primary"></i> </span> Breakfast Included</li>';            }            if ($row['breakfast'] == 2) {                $out_put .= ' <li><span class = "icon-font"><i class = "fas fa-check-circle text-primary"></i> </span> It is optional</li>';            }            foreach ($ACCOMMODATION_FACILITY->getAcAccommodationFacilityById($row['id']) as $key => $facility) {                if ($key == 0) {                    $FACILITY = new Facility($facility['facility_id']);                    $out_put .= '  <li><span class = "icon-font"><i class = "fas fa-check-circle text-primary"></i></span>' . $FACILITY->title . '</li>';                }            }            $out_put .= '</ul>            </div>            <div class = "ml-auto">            <a href = "accommodations/view/' . base64_encode($row['id']) . '" target="_blank" class = "btn btn-primary btn-sm btn-wide">Details</a>                    </div>                </div>                </div>             </div>          </div>        </div>       </div>      </div>';        }        if (!empty($out_put)) {            echo $out_put;        } else {            echo $out_put = '<p style = "color: red;font-weight: 600;">No Accommodation Data Founds..!</p>';        }    }    public function showPagination($accommodation_type, $start_rate, $facility, $per_page, $page) {        $query = "SELECT COUNT(*) as totalCount FROM `accommodation` WHERE ";        if (!empty($accommodation_type)) {            $accommodation_type_filter = implode(",", $accommodation_type);            $query .= " `type` in( " . $accommodation_type_filter . ")  AND ";        }        if (!empty($start_rate)) {            $start_rate_filter = implode(",", $start_rate);            $query .= " `star_rating` in( " . $start_rate_filter . ")  AND ";        }        if (!empty($facility)) {            $facility_filter = implode(",", $facility);            $query .= " `facility` in( " . $facility_filter . ")  AND ";        }        $query .= " `isPublished` = 1  ORDER BY `queue` asc";        $page_url = "?";        $db = new Database();        $result = $db->readQuery($query);        $row = mysqli_fetch_array($result);        $total = $row['totalCount'];        $adjacents = "2";        $page = ($page == 0 ? 1 : $page);        $start = ($page - 1) * $per_page;        $first = $start + 1;        $last = $start + $per_page;        $prev = $page - 1;        $next = $page + 1;        $setLastpage = ceil($total / $per_page);        $lpm1 = $setLastpage - 1;        $setPaginate = "";        $setPaginate .= "<div class='setPage'>Showing result $first to $last from $total</div>";        if ($setLastpage > 1) {            $setPaginate .= "<ul class='setPaginate'>";            if ($page > 1) {                $setPaginate.= "<li><a href='#' class='page' page='$prev'>&laquo;</a></li>";            } else {                $setPaginate.= "<li><a class='current_page1 page'>&laquo;</a></li>";            }            if ($setLastpage < 7 + ($adjacents * 2)) {                for ($counter = 1; $counter <= $setLastpage; $counter++) {                    if ($counter == $page)                        $setPaginate.= "<li><a class='current_page  '>$counter</a></li>";                    else                        $setPaginate.= "<li><a href='#' class='page' page='$counter'>$counter</a></li>";                }            }            elseif ($setLastpage > 5 + ($adjacents * 2)) {                if ($page < 1 + ($adjacents * 2)) {                    for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++) {                        if ($counter == $page)                            $setPaginate.= "<li><a class='current_page page'>$counter</a></li>";                        else                            $setPaginate.= "<li><a href='#' class='page' page='$counter'>$counter</a></li>";                    }                    $setPaginate.= "<li class='dot'>...</li>";                    $setPaginate.= "<li><a href='#' class='page' page='$lpm1'>$lpm1</a></li>";                    $setPaginate.= "<li><a href='#' class='page' page='$setLastpage'>$setLastpage</a></li>";                }                elseif ($setLastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2)) {                    $setPaginate.= "<li><a href='#' class='page' page='1'>1</a></li>";                    $setPaginate.= "<li><a href='#' class='page' page='2'>2</a></li>";                    $setPaginate.= "<li class='dot'>...</li>";                    for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++) {                        if ($counter == $page)                            $setPaginate.= "<li><a class='current_page page'>$counter</a></li>";                        else                            $setPaginate.= "<li><a href='#' class='page' page='$counter'>$counter</a></li>";                    }                    $setPaginate.= "<li class='dot'>..</li>";                    $setPaginate.= "<li><a href='#' class='page' page='$lpm1'>$lpm1</a></li>";                    $setPaginate.= "<li><a href='#' class='page' page='$setLastpage'>$setLastpage</a></li>";                }                else {                    $setPaginate.= "<li><a href='#' class='page' page='1>1</a></li>";                    $setPaginate.= "<li><a href='#' class='page' page='2'>2</a></li>";                    $setPaginate.= "<li class='dot'>..</li>";                    for ($counter = $setLastpage - (2 + ($adjacents * 2)); $counter <= $setLastpage; $counter++) {                        if ($counter == $page)                            $setPaginate.= "<li><a class='current_page page'>$counter</a></li>";                        else                            $setPaginate.= "<li><a href='#' class='page' page='$counter'>$counter</a></li>";                    }                }            }            if ($page < $counter - 1) {                $setPaginate.= "<li><a href='#' class='page' page='$next'>&raquo;</a></li>";            } else {                $setPaginate.= "<li><a class='current_page1 page'>&raquo;</a></li>";            }            $setPaginate.= "</ul>\n";        }        echo $setPaginate;    }    public function searchAccommodation($city, $nu_rooms, $guest, $pageLimit, $setLimit) {//SELECT distinct(room.acc_id),accommodation.id FROM `accommodation` INNER JOIN room ON room.acc_id = accommodation.id WHERE accommodation.city = 378 AND room.num_of_rooms >= 2 AND room.max>=1 AND accommodation.isPublished= 1         $query = "SELECT distinct(room.acc_id),accommodation.id  FROM `accommodation` INNER JOIN room ON room.acc_id = accommodation.id  WHERE ";        if (!empty($city)) {            $query .= "accommodation.city = " . $city . " AND ";        }        if (!empty($nu_rooms)) {            $query .= "room.num_of_rooms >= " . $nu_rooms . " OR ";        }        if (!empty($guest)) {            $query .= "room.max >= " . $guest . " AND ";        }        $query .= "accommodation.isPublished = 1 ";        $db = new Database();        $result = $db->readQuery($query);        $out_put = '';        while ($row = mysqli_fetch_array($result)) {            $ACC = new Accommodation($row['id']);            $ROOM = new Room(NULL);            $CITY = new City($ACC->city);            $ACC_TYPE = new AccommodationType($ACC->type);            $out_put .= '<div class="product-grid-item">                                        <a href="hotel-view.php?id=' . $ACC->id . '" target="_blank">                                            <div class="image caption-relative">                                                <img src="upload/accommodation/gallery/thumb/' . $ACC->image_name . '" alt="' . $ACC->title . '">                                                <div class="caption-holder padding-10">                                                    <div class="caption-top w-100 text-right">                                                        <span class=" d-inline-block font600 text-uppercase font12 ph-15 pv-5 line-135 rounded" style="background-color: #006607">' . $ACC_TYPE->title . '</span>                                                    </div>                                                </div>                                            </div>                                            <div class="content clearfix">                                                <div class="rating-item rating-sm">                                                    <div class="rating-icons">                                                        <p class="rating-text text-muted"> <span class="material-icons star-size-1">    star   </span>      <span class="material-icons star-size-1">    star   </span>  <span class="material-icons star-size-1">    star   </span>  <span class="material-icons star-size-1">    star   </span>  <span class="material-icons star-size-1">    star   </span> <span class="bg-primary">6.0</span> <strong class="text-dark">Good</strong> - 1,2547 reviews</p>                                                    </div>                                                </div>                                                <div class="short-info">                                                    <h5>' . substr($ACC->title, 0, 20) . '..</h5>                                                    <p class="location"><i class="fas fa-map-marker-alt text-primary"></i> ' . $ACC->address_1 . ', ' . $CITY->name . '</p>                                                </div>                                                <div class="price">                                                    <div class="float-right">                                                        start from                                                        <span class="text-secondary">$' . $ROOM->getMinPriceByAccommodation($row['id']) . '</span>                                                        per night                                                    </div>                                                </div>                                            </div>                                        </a>                                    </div> ';        }        if (!empty($out_put)) {            echo $out_put;        } else {            echo $out_put = '<p style = "color: red;font-weight: 600;">No Data Found..!</p>';        }    }    public function showPaginationSearch($city, $nu_rooms, $guest, $per_page, $page) {        $query = "SELECT COUNT(accommodation.id) as totalCount  FROM `accommodation` INNER JOIN room ON room.acc_id = accommodation.id  WHERE ";        if (!empty($city)) {            $query .= "accommodation.city = " . $city . " AND ";        }        if (!empty($nu_rooms)) {            $query .= "room.num_of_rooms >= " . $nu_rooms . " OR ";        }        if (!empty($guest)) {            $query .= "room.max >= " . $guest . " AND ";        }        $query .= "accommodation.isPublished = 1 ";        $db = new Database();        $page_url = "?";        $rec = mysqli_fetch_array(mysql_query($query));        $total = $rec['totalCount'];        $adjacents = "2";        $page = ($page == 0 ? 1 : $page);        $start = ($page - 1) * $per_page;        $first = $start + 1;        $last = $start + $per_page;        $prev = $page - 1;        $next = $page + 1;        $setLastpage = ceil($total / $per_page);        $lpm1 = $setLastpage - 1;        $setPaginate = "";        $setPaginate .= "<div class='setPage'>Showing result $first to $last from $total</div>";        if ($setLastpage > 1) {            $setPaginate .= "<ul class='setPaginate'>";            if ($page > 1) {                $setPaginate.= "<li><a href='#' class='page' page='$prev'>&laquo;</a></li>";            } else {                $setPaginate.= "<li><a class='current_page1 page'>&laquo;</a></li>";            }            if ($setLastpage < 7 + ($adjacents * 2)) {                for ($counter = 1; $counter <= $setLastpage; $counter++) {                    if ($counter == $page)                        $setPaginate.= "<li><a class='current_page  '>$counter</a></li>";                    else                        $setPaginate.= "<li><a href='#' class='page' page='$counter'>$counter</a></li>";                }            }            elseif ($setLastpage > 5 + ($adjacents * 2)) {                if ($page < 1 + ($adjacents * 2)) {                    for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++) {                        if ($counter == $page)                            $setPaginate.= "<li><a class='current_page page'>$counter</a></li>";                        else                            $setPaginate.= "<li><a href='#' class='page' page='$counter'>$counter</a></li>";                    }                    $setPaginate.= "<li class='dot'>...</li>";                    $setPaginate.= "<li><a href='#' class='page' page='$lpm1'>$lpm1</a></li>";                    $setPaginate.= "<li><a href='#' class='page' page='$setLastpage'>$setLastpage</a></li>";                }                elseif ($setLastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2)) {                    $setPaginate.= "<li><a href='#' class='page' page='1'>1</a></li>";                    $setPaginate.= "<li><a href='#' class='page' page='2'>2</a></li>";                    $setPaginate.= "<li class='dot'>...</li>";                    for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++) {                        if ($counter == $page)                            $setPaginate.= "<li><a class='current_page page'>$counter</a></li>";                        else                            $setPaginate.= "<li><a href='#' class='page' page='$counter'>$counter</a></li>";                    }                    $setPaginate.= "<li class='dot'>..</li>";                    $setPaginate.= "<li><a href='#' class='page' page='$lpm1'>$lpm1</a></li>";                    $setPaginate.= "<li><a href='#' class='page' page='$setLastpage'>$setLastpage</a></li>";                }                else {                    $setPaginate.= "<li><a href='#' class='page' page='1>1</a></li>";                    $setPaginate.= "<li><a href='#' class='page' page='2'>2</a></li>";                    $setPaginate.= "<li class='dot'>..</li>";                    for ($counter = $setLastpage - (2 + ($adjacents * 2)); $counter <= $setLastpage; $counter++) {                        if ($counter == $page)                            $setPaginate.= "<li><a class='current_page page'>$counter</a></li>";                        else                            $setPaginate.= "<li><a href='#' class='page' page='$counter'>$counter</a></li>";                    }                }            }            if ($page < $counter - 1) {                $setPaginate.= "<li><a href='#' class='page' page='$next'>&raquo;</a></li>";            } else {                $setPaginate.= "<li><a class='current_page1 page'>&raquo;</a></li>";            }            $setPaginate.= "</ul>\n";        }        echo $setPaginate;    }    public function getByCity($city) {        $query = "SELECT * FROM `accommodation` WHERE `city` =" . $city . " ORDER BY queue ASC";        $db = new Database();        $result = $db->readQuery($query);        $array_res = array();        while ($row = mysqli_fetch_array($result)) {            array_push($array_res, $row);        }        return $array_res;    }    public function update() {        $query = "UPDATE  `accommodation` SET "                . "`title` ='" . $this->title . "', "                . "`type` ='" . $this->type . "', "                . "`booking_com` ='" . $this->booking_com . "', "                . "`tripadvisor` ='" . $this->tripadvisor . "', "                . "`agoda` ='" . $this->agoda . "', "                . "`expedia` ='" . $this->expedia . "', "                . "`star_rating` ='" . $this->star_rating . "', "                . "`address_1` ='" . $this->address_1 . "', "                . "`address_2` ='" . $this->address_2 . "', "                . "`email` ='" . $this->email . "', "                . "`city` ='" . $this->city . "', "                . "`zip_code` ='" . $this->zip_code . "', "                . "`contact_name` ='" . $this->contact_name . "', "                . "`mobile_number_1` ='" . $this->mobile_number_1 . "', "                . "`mobile_number_2` ='" . $this->mobile_number_2 . "', "                . "`image_name` ='" . $this->image_name . "', "                . "`parking` ='" . $this->parking . "', "                . "`breakfast` ='" . $this->breakfast . "', "                . "`children` ='" . $this->children . "', "                . "`pets` ='" . $this->pets . "', "                . "`check_in` ='" . $this->check_in . "', "                . "`check_out` ='" . $this->check_out . "', "                . "`description` ='" . $this->description . "', "                . "`guest_payment` ='" . $this->guest_payment . "', "                . "`payment_card` ='" . $this->payment_card . "', "                . "`invoice_name` ='" . $this->invoice_name . "', "                . "`queue` ='" . $this->queue . "' "                . "WHERE `id` = '" . $this->id . "'";        $db = new Database();        $result = $db->readQuery($query);        if ($result) {            return $this->__construct($this->id);        } else {            return FALSE;        }    }    public function updateLocation() {        $query = "UPDATE  `accommodation` SET "                . "`description` ='" . $this->description . "', "                . "`map_image` ='" . $this->map_image . "', "                . "`map` ='" . $this->map . "', "                . "`location` ='" . $this->location . "', "                . "`isPublished` ='" . $this->isPublished . "' "                . "WHERE `id` = '" . $this->id . "'";        $db = new Database();        $result = $db->readQuery($query);        if ($result) {            return $this->__construct($this->id);        } else {            return FALSE;        }    }    public function delete() {        $ROOM = new Room(NULL);        $ROOM->delete($this->id);        unlink(Helper::getSitePath() . "upload/accommodation/gallery/" . $this->image_name);        unlink(Helper::getSitePath() . "upload/accommodation/gallery/thumb/" . $this->image_name);        $query = 'DELETE FROM `accommodation` WHERE id = "' . $this->id . '"';        $db = new Database();        return $db->readQuery($query);    }    public function arrange($key, $img) {        $query = "UPDATE `accommodation` SET `queue` = '" . $key . "'  WHERE id = '" . $img . "'";        $db = new Database();        $result = $db->readQuery($query);        return $result;    }    public function getActivitiesByTitle($title) {        $query = "SELECT `id` FROM `accommodation` WHERE `title` LIKE '" . $title . "'";        $db = new Database();        $result = mysqli_fetch_array($db->readQuery($query));        return $result['id'];    }    public function getAccommodationCustomer($id) {        $query = "SELECT * FROM `accommodation` WHERE `customer_id`= $id ORDER BY queue ASC";        $db = new Database();        $result = $db->readQuery($query);        $array_res = array();        while ($row = mysqli_fetch_array($result)) {            array_push($array_res, $row);        }        return $array_res;    }    public function getAccommodationByPublished() {        $query = "SELECT * FROM `accommodation` WHERE `isPublished`= 1 ORDER BY queue ASC";        $db = new Database();        $result = $db->readQuery($query);        $array_res = array();        while ($row = mysqli_fetch_array($result)) {            array_push($array_res, $row);        }        return $array_res;    }    public function getAccommodationByNotPublished() {        $query = "SELECT * FROM `accommodation` WHERE `isPublished`= 0 ORDER BY queue ASC";        $db = new Database();        $result = $db->readQuery($query);        $array_res = array();        while ($row = mysqli_fetch_array($result)) {            array_push($array_res, $row);        }        return $array_res;    }    public function getCountByAccommodations($id) {        $query = "SELECT count(id) as 'count' FROM `accommodation` WHERE `type` = '" . $id . "' ";        $db = new Database();        $result = mysqli_fetch_array($db->readQuery($query));        return $result['count'];    }    public function getCountStarByAccommodations($id) {        $query = "SELECT count(id) as 'count' FROM `accommodation` WHERE `star_rating` = '" . $id . "' ";        $db = new Database();        $result = mysqli_fetch_array($db->readQuery($query));        return $result['count'];    }    public function getCountFacilityByAccommodations($id) {        $query = "SELECT count(id) as 'count' FROM `accommodation` WHERE `star_rating` = '" . $id . "' ";        $db = new Database();        $result = mysqli_fetch_array($db->readQuery($query));        return $result['count'];    }    public function getCountAccommodationsByCity($id) {        $query = "SELECT count(id) as 'count' FROM `accommodation` WHERE `city` = '" . $id . "' ";        $db = new Database();        $result = mysqli_fetch_array($db->readQuery($query));        return $result['count'];    }    public function pendingAccommodations() {        $query = "SELECT * FROM `accommodation` WHERE `isPublished`=  '0'";        $db = new Database();        $result = $db->readQuery($query);        $array_res = array();        while ($row = mysqli_fetch_array($result)) {            array_push($array_res, $row);        }        return $array_res;    }}